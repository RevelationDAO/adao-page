(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ffb29358"],{"0472":function(e,t,n){},"2f85":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"x-input"},[n("div",{staticClass:"flex align-center",class:["inner","row-center"],style:{"border-color":e.error?"#ff8484":"#24252a"}},[n("input",{attrs:{type:e.type,maxlength:e.maxlength,placeholder:e.placeholder},domProps:{value:e.currentValue},on:{input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}}),""!==e.after?n("div",{staticClass:"after",on:{click:function(t){return e.handleAfter()}}},[e._v(e._s(e.after))]):e._e(),e.max?n("div",{staticClass:"max",on:{click:function(t){return e.handleMax()}}},[e._v(e._s(e.$t("最大值")))]):e._e()])])},a=[],i=(n("a9e3"),{name:"XInput",props:{value:[String,Number],type:{type:String,default:"text"},max:{type:Boolean,default:!1},maxlength:{type:Number,default:999},placeholder:{type:String,default:"Please enter"},after:{type:String,default:""},error:{type:Boolean,default:!1}},data:function(){return{currentValue:void 0===this.value||null===this.value?"":this.value}},watch:{value:function(e){this.currentValue=e}},methods:{handleInput:function(e){this.currentValue=e.target.value,this.$emit("input",e.target.value)},handleFocus:function(e){this.$emit("focus",e)},handleBlur:function(e){this.$emit("blur",e)},handleChange:function(e){this.$emit("change",e.target.value)},handleAfter:function(){this.$emit("afterClick")},handleMax:function(){this.$emit("maxClick")}}}),o=i,s=(n("4539"),n("2877")),c=Object(s["a"])(o,r,a,!1,null,"538cfa20",null);t["a"]=c.exports},4539:function(e,t,n){"use strict";n("f24d")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},"689a":function(e,t,n){"use strict";n("0472")},"690a":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"my-pc":"pc"===e.$store.state.pc,"my-mobile":"mobile"===e.$store.state.pc}},[n("notify",{ref:"notify"}),"pc"===e.$store.state.pc?n("div",{staticClass:"flex flex-direction align-center v1-pool"},[n("div",{staticClass:"inner flex flex-direction align-center "},[n("div",{staticClass:"token flex align-center"},[n("div",{staticClass:"first"},[e._v("MC Token:")]),n("x-input",{attrs:{value:e.amount,error:"amount"==e.error,max:!0},on:{input:e.amountInput,maxClick:e.maxClick}})],1),n("x-button",{staticClass:"btn1",attrs:{disable:e.approveBtn.disable||e.approveBtn.loading,loading:e.approveBtn.loading},on:{click:e.approve}},[e._v(e._s(e.$t("授权"))+" ")]),n("x-button",{staticClass:"btn2",attrs:{disable:e.exchangeBtn.disable||e.exchangeBtn.loading||!e.approveBtn.disable,loading:e.exchangeBtn.loading},on:{click:e.exchange}},[e._v(e._s(e.$t("质押"))+" ")])],1),n("x-button",{on:{click:function(t){return e.$router.push({path:"/record?version=v1"})}}},[e._v(e._s(e.$t("质押记录")))])],1):e._e(),"mobile"===e.$store.state.pc?n("div",{staticClass:"flex flex-direction align-center v1-pool"},[n("div",{staticClass:"inner flex flex-direction align-center "},[n("div",{staticClass:"token flex align-center"},[n("div",{staticClass:"first"},[e._v("MC Token:")]),n("x-input",{attrs:{value:e.amount,error:"amount"==e.error,max:!0},on:{input:e.amountInput,maxClick:e.maxClick}})],1),n("x-button",{staticClass:"btn1",attrs:{disable:e.approveBtn.disable||e.approveBtn.loading,loading:e.approveBtn.loading},on:{click:e.approve}},[e._v(e._s(e.$t("授权"))+" ")]),n("x-button",{staticClass:"btn2",attrs:{disable:e.exchangeBtn.disable||e.exchangeBtn.loading||!e.approveBtn.disable,loading:e.exchangeBtn.loading},on:{click:e.exchange}},[e._v(e._s(e.$t("质押"))+" ")])],1),n("x-button",{on:{click:function(t){return e.$router.push({path:"/record?version=v1"})}}},[e._v(e._s(e.$t("质押记录")))])],1):e._e()],1)},a=[],i=(n("96cf"),n("1da1")),o=n("ade3"),s=n("cef1"),c=n("2f85"),u=n("b856"),l=n("5571"),p=n("901e"),f=n.n(p),d={name:"v1-pool",components:{XButton:s["a"],XInput:c["a"],notify:u["a"]},data:function(){return{amount:"",error:"",balance:"",approveBtn:{loading:!1,disable:!0},exchangeBtn:{loading:!1,disable:!0}}},watch:Object(o["a"])({},"$store.state.walletAddress",(function(){this.init()})),methods:{approve:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.approveBtn.loading=!0,t.prev=1,t.next=4,e.$utils.txHandler(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apiManagerIns.getUserApi();case 2:return t.next=4,t.sent.ALPTokenApprove();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),e.$t("授权失败"),(function(t){e.$refs.notify.show(t.txId)}));case 4:return e.approveBtn.disable=!0,e.$toast(e.$t("授权成功")),t.next=8,e.init(!1);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.approveBtn.disable=!1;case 13:return t.prev=13,e.approveBtn.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})))()},init:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=!(e.length>0&&void 0!==e[0])||e[0],r&&Object.assign(t.$data,t.$options.data()),!t.$store.state.walletConnect){n.next=16;break}return n.t0=f.a,n.next=6,t.$apiManagerIns.getUserApi();case 6:return n.next=8,n.sent.getAllowance(t.$store.state.walletAddress,l["a"].currentConfig().config.miningA,l["a"].currentConfig().config.aLPToken);case 8:return n.t1=n.sent.amount,n.t2=new n.t0(n.t1).comparedTo("100000000"),t.approveBtn.disable=n.t2>0,n.next=13,t.$apiManagerIns.getUserApi();case 13:return n.next=15,n.sent.getBalance(t.$store.state.walletAddress,l["a"].currentConfig().config.aLPToken);case 15:t.balance=n.sent.amount;case 16:case"end":return n.stop()}}),n)})))()},maxClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.amount=e.balance,t.next=3,e.updateValue();case 3:case"end":return t.stop()}}),t)})))()},amountInput:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.amount=e,n.next=3,t.updateValue();case 3:case"end":return n.stop()}}),n)})))()},updateValue:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.exchangeBtn.disable=!0,e.$utils.isNumber(e.amount)){t.next=4;break}return e.error="amount",t.abrupt("return");case 4:e.error="",e.exchangeBtn.disable=!1;case 6:case"end":return t.stop()}}),t)})))()},exchange:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.updateValue();case 2:if(e.exchangeBtn.disable){t.next=14;break}return new f.a(e.balance).comparedTo(e.amount)<0&&e.$errorToast(e.$t("余额不足")),e.exchangeBtn.loading=!0,t.prev=5,t.next=8,e.$utils.txHandler(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apiManagerIns.getUserApi();case 2:return t.next=4,t.sent.stakeMiningA(e.$utils.toTokenAmount(e.amount,18));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),e.$t("质押失败"),(function(t){e.$refs.notify.show(t.txId)}));case 8:return e.$toast(e.$t("质押成功")),t.next=11,e.init();case 11:return t.prev=11,e.exchangeBtn.loading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[5,,11,14]])})))()}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:case"end":return t.stop()}}),t)})))()}},g=d,h=(n("689a"),n("2877")),v=Object(h["a"])(g,r,a,!1,null,"a694df9a",null);t["default"]=v.exports},7156:function(e,t,n){var r=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var i,o;return a&&"function"==typeof(i=t.constructor)&&i!==n&&r(o=i.prototype)&&o!==n.prototype&&a(e,o),e}},a9e3:function(e,t,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),o=n("6eeb"),s=n("5135"),c=n("c6b6"),u=n("7156"),l=n("c04e"),p=n("d039"),f=n("7c73"),d=n("241c").f,g=n("06cf").f,h=n("9bf2").f,v=n("58a8").trim,x="Number",m=a[x],b=m.prototype,w=c(f(b))==x,$=function(e){var t,n,r,a,i,o,s,c,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=v(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(i=u.slice(2),o=i.length,s=0;s<o;s++)if(c=i.charCodeAt(s),c<48||c>a)return NaN;return parseInt(i,r)}return+u};if(i(x,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var k,C=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof C&&(w?p((function(){b.valueOf.call(n)})):c(n)!=x)?u(new m($(t)),n,C):$(t)},_=r?d(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),B=0;_.length>B;B++)s(m,k=_[B])&&!s(C,k)&&h(C,k,g(m,k));C.prototype=b,b.constructor=C,o(a,x,C)}},f24d:function(e,t,n){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b5e3a3f"],{"29bc":function(e,t,n){},"2f85":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"x-input"},[n("div",{staticClass:"flex align-center",class:["inner","row-center"],style:{"border-color":e.error?"#ff8484":"#24252a"}},[n("input",{attrs:{type:e.type,maxlength:e.maxlength,placeholder:e.placeholder},domProps:{value:e.currentValue},on:{input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}}),""!==e.after?n("div",{staticClass:"after",on:{click:function(t){return e.handleAfter()}}},[e._v(e._s(e.after))]):e._e(),e.max?n("div",{staticClass:"max",on:{click:function(t){return e.handleMax()}}},[e._v(e._s(e.$t("最大值")))]):e._e()])])},a=[],i=(n("a9e3"),{name:"XInput",props:{value:[String,Number],type:{type:String,default:"text"},max:{type:Boolean,default:!1},maxlength:{type:Number,default:999},placeholder:{type:String,default:"Please enter"},after:{type:String,default:""},error:{type:Boolean,default:!1}},data:function(){return{currentValue:void 0===this.value||null===this.value?"":this.value}},watch:{value:function(e){this.currentValue=e}},methods:{handleInput:function(e){this.currentValue=e.target.value,this.$emit("input",e.target.value)},handleFocus:function(e){this.$emit("focus",e)},handleBlur:function(e){this.$emit("blur",e)},handleChange:function(e){this.$emit("change",e.target.value)},handleAfter:function(){this.$emit("afterClick")},handleMax:function(){this.$emit("maxClick")}}}),s=i,c=(n("4539"),n("2877")),o=Object(c["a"])(s,r,a,!1,null,"538cfa20",null);t["a"]=o.exports},4539:function(e,t,n){"use strict";n("f24d")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",s=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),o=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(c,"")),n}};e.exports={start:o(1),end:o(2),trim:o(3)}},"697d":function(e,t,n){"use strict";n("29bc")},7156:function(e,t,n){var r=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var i,s;return a&&"function"==typeof(i=t.constructor)&&i!==n&&r(s=i.prototype)&&s!==n.prototype&&a(e,s),e}},a9e3:function(e,t,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),s=n("6eeb"),c=n("5135"),o=n("c6b6"),u=n("7156"),l=n("c04e"),d=n("d039"),p=n("7c73"),f=n("241c").f,g=n("06cf").f,x=n("9bf2").f,v=n("58a8").trim,h="Number",m=a[h],b=m.prototype,w=o(p(b))==h,_=function(e){var t,n,r,a,i,s,c,o,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=v(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(i=u.slice(2),s=i.length,c=0;c<s;c++)if(o=i.charCodeAt(c),o<48||o>a)return NaN;return parseInt(i,r)}return+u};if(i(h,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var $,C=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof C&&(w?d((function(){b.valueOf.call(n)})):o(n)!=h)?u(new m(_(t)),n,C):_(t)},k=r?f(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),A=0;k.length>A;A++)c(m,$=k[A])&&!c(C,$)&&x(C,$,g(m,$));C.prototype=b,b.constructor=C,s(a,h,C)}},f24d:function(e,t,n){},f926:function(e,t,n){e.exports=n.p+"img/adao.f5fd8e63.png"},fc8e:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"my-pc":"pc"===e.$store.state.pc,"my-mobile":"mobile"===e.$store.state.pc}},[r("notify",{ref:"notify"}),"pc"===e.$store.state.pc?r("div",{staticClass:"flex flex-direction align-center destroy"},[r("div",{staticClass:"inner flex flex-direction align-center "},[r("div",{staticClass:"adao flex align-center"},[r("img",{attrs:{src:n("f926")}}),r("x-input",{attrs:{value:e.adao,error:"adao"===e.error,max:!0},on:{input:e.adaoInput,maxClick:e.maxClick}})],1),r("div",{staticClass:"inv flex align-center"},[r("div",{staticClass:"first"},[e._v(e._s(e.$t("贡献者地址"))+":")]),r("x-input",{attrs:{value:e.inv,error:"inv"===e.error},on:{input:e.invInput}})],1),r("div",{staticClass:"exchange flex align-center"},[e._v(e._s(e.$t("当前价格"))+" 1 ADAO = "+e._s(e._f("toFixed")(e.price,8))+" USDT")]),r("div",{staticClass:"exchange flex align-center"},[e._v(e._s(e.$t("预计得到"))+" "+e._s(e._f("toFixed")(e.minAmount,8))+" MC")]),r("x-button",{staticClass:"btn1",attrs:{disable:e.approveBtn.disable||e.approveBtn.loading,loading:e.approveBtn.loading},on:{click:e.approve}},[e._v(e._s(e.$t("授权"))+" ")]),r("x-button",{staticClass:"btn2",attrs:{disable:e.exchangeBtn.disable||e.exchangeBtn.loading||!e.approveBtn.disable,loading:e.exchangeBtn.loading},on:{click:e.exchange}},[e._v(e._s(e.$t("开始铸造"))+" ")])],1),e.record.length>0?r("div",{staticClass:"flex flex-direction align-center",staticStyle:{"z-index":"100","background-color":"#ffffff",padding:"20px","margin-top":"10px"}},[r("div"),e._l(e.record,(function(t,n){return r("div",{key:n,staticClass:"flex align-center justify-between",staticStyle:{width:"500px","line-height":"50px"}},[r("div",[e._v(e._s(e._f("formatTimer")(1e3*t.time)))]),r("div",[e._v(e._s(t.amount)+" ADAO")])])}))],2):e._e()]):e._e(),"mobile"===e.$store.state.pc?r("div",{staticClass:"flex flex-direction align-center destroy"},[r("div",{staticClass:"inner flex flex-direction align-center "},[r("div",{staticClass:"adao flex align-center"},[r("img",{attrs:{src:n("f926")}}),r("x-input",{attrs:{value:e.adao,error:"adao"===e.error,max:!0},on:{input:e.adaoInput,maxClick:e.maxClick}})],1),r("div",{staticClass:"inv flex align-center"},[r("div",{staticClass:"first"},[e._v(e._s(e.$t("贡献者地址"))+":")]),r("x-input",{attrs:{value:e.inv,error:"inv"===e.error},on:{input:e.invInput}})],1),r("div",{staticClass:"exchange flex align-center"},[e._v(e._s(e.$t("当前价格"))+" 1 ADAO = "+e._s(e._f("toFixed")(e.price,8))+" USDT")]),r("div",{staticClass:"exchange flex align-center"},[e._v(e._s(e.$t("预计得到"))+" "+e._s(e._f("toFixed")(e.minAmount,8))+" MC")]),r("x-button",{staticClass:"btn1",attrs:{disable:e.approveBtn.disable||e.approveBtn.loading,loading:e.approveBtn.loading},on:{click:e.approve}},[e._v(e._s(e.$t("授权"))+" ")]),r("x-button",{staticClass:"btn2",attrs:{disable:e.exchangeBtn.disable||e.exchangeBtn.loading||!e.approveBtn.disable,loading:e.exchangeBtn.loading},on:{click:e.exchange}},[e._v(e._s(e.$t("开始铸造"))+" ")])],1)]):e._e()],1)},a=[],i=(n("b680"),n("96cf"),n("1da1")),s=n("ade3"),c=n("cef1"),o=n("2f85"),u=n("b856"),l=n("901e"),d=n.n(l),p=n("99e5"),f=n.n(p),g=n("5571"),x={name:"destroy",components:{XButton:c["a"],XInput:o["a"],notify:u["a"]},data:function(){return{adao:"",balance:"",inv:"",error:"",minAmount:"-",price:"-",record:[],approveBtn:{loading:!1,disable:!0},exchangeBtn:{loading:!1,disable:!0}}},watch:Object(s["a"])({},"$store.state.walletAddress",(function(){this.init()})),methods:{maxClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.adao=e.balance,t.next=3,e.updateValue();case 3:case"end":return t.stop()}}),t)})))()},adaoInput:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.adao=e,n.next=3,t.updateValue();case 3:case"end":return n.stop()}}),n)})))()},invInput:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.inv=e,n.next=3,t.updateValue();case 3:case"end":return n.stop()}}),n)})))()},updateValue:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.exchangeBtn.disable=!0,e.$utils.isNumber(e.adao)){t.next=4;break}return e.error="adao",t.abrupt("return");case 4:if(f.a.utils.isAddress(e.inv)){t.next=8;break}return e.error="inv",t.abrupt("return");case 8:return e.error="",t.t0=d.a,t.t1=e.$utils,t.next=13,e.$apiManagerIns.getUserApi();case 13:return t.next=15,t.sent.calcExchange(e.$utils.toTokenAmount(e.adao,18));case 15:t.t2=t.sent,t.t3=t.t1.convertBigNumber.call(t.t1,t.t2,1e18),e.minAmount=new t.t0(t.t3).multipliedBy(3).div(10).toFixed(),e.exchangeBtn.disable=!1;case 19:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.state.walletConnect){t.next=29;break}return t.t0=d.a,t.next=4,e.$apiManagerIns.getUserApi();case 4:return t.next=6,t.sent.getAllowance(e.$store.state.walletAddress,g["a"].currentConfig().config.destroy,g["a"].currentConfig().config.adaoToken);case 6:return t.t1=t.sent.amount,t.t2=new t.t0(t.t1).comparedTo("100000000"),e.approveBtn.disable=t.t2>0,t.next=11,e.$apiManagerIns.getUserApi();case 11:return t.next=13,t.sent.getBalance(e.$store.state.walletAddress,g["a"].currentConfig().config.adaoToken);case 13:return e.balance=t.sent.amount,t.t3=d.a,t.t4=e.$utils,t.next=18,e.$apiManagerIns.getUserApi();case 18:return t.next=20,t.sent.calcExchange(e.$utils.toTokenAmount(1,18));case 20:if(t.t5=t.sent,t.t6=t.t4.convertBigNumber.call(t.t4,t.t5,1e18),e.price=new t.t3(t.t6).toFixed(),"test"!==g["a"].currentConfig().network){t.next=29;break}return t.next=26,e.$apiManagerIns.getUserApi();case 26:return t.next=28,t.sent.destroyRecord();case 28:e.record=t.sent;case 29:case"end":return t.stop()}}),t)})))()},exchange:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.updateValue();case 2:if(e.exchangeBtn.disable){t.next=14;break}return new d.a(e.balance).comparedTo(e.adao)<0&&e.$errorToast(e.$t("余额不足")),e.exchangeBtn.loading=!0,t.prev=5,t.next=8,e.$utils.txHandler(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apiManagerIns.getUserApi();case 2:return t.next=4,t.sent.exchange(e.$utils.toTokenAmount(e.adao,18),"0",e.inv);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),e.$t("兑换失败"),(function(t){e.$refs.notify.show(t.txId)}));case 8:return e.$toast(e.$t("兑换成功")),t.next=11,e.init();case 11:return t.prev=11,e.exchangeBtn.loading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[5,,11,14]])})))()},approve:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.approveBtn.loading=!0,t.prev=1,t.next=4,e.$utils.txHandler(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apiManagerIns.getUserApi();case 2:return t.next=4,t.sent.ADAOApprove();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),e.$t("授权失败"),(function(t){e.$refs.notify.show(t.txId)}));case 4:return e.approveBtn.disable=!0,e.$toast(e.$t("授权成功")),t.next=8,e.init();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.approveBtn.disable=!1;case 13:return t.prev=13,e.approveBtn.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})))()}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:case"end":return t.stop()}}),t)})))()}},v=x,h=(n("697d"),n("2877")),m=Object(h["a"])(v,r,a,!1,null,"2484bb56",null);t["default"]=m.exports}}]);